{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{RNiq:function(n,t,e){\"use strict\";e.r(t),e.d(t,\"__N_SSG\",(function(){return x}));var r=e(\"o0o1\"),a=e.n(r);function o(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||\"[object Arguments]\"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}var i=e(\"q1tI\"),c=e.n(i),u=e(\"zCU7\"),s=e(\"YFqc\"),l=e.n(s),p=e(\"vOnD\"),f=e(\"wd/R\"),d=e.n(f),g=e(\"UZ2z\"),m=(e(\"zqYy\"),c.a.createElement),_=p.a.button.withConfig({displayName:\"KeywordTags__TagBtn\",componentId:\"sc-1eepvlk-0\"})([\"padding:10px 15px;margin:15px 0 0 15px;color:var(--secondary-color);font-size:1.2em;border:none;background-color:var(--primary-color);font-family:'Lustria',serif;&:hover{cursor:pointer;}\"]);var h=function(n){return console.log(\"props: \",n),n.tags.sort((function(n,t){return n.name>t.name?1:-1})),m(\"div\",null,m(_,{onClick:n.handleTagFilter,id:\"clearFilter\",className:n.filteredTags.length>0?\"\":\"selectedTag\"},\"All Posts\"),n.tags.map((function(t){return t.count>0&&m(_,{key:t.name,id:t._id,onClick:n.handleTagFilter,className:n.filteredTags.includes(t._id)?\"selectedTag\":\"\"},t.name,\"\\xa0 (\",t.count,\")\")})))},y=c.a.createElement,w=p.a.li.withConfig({displayName:\"pages__ListItem\",componentId:\"nuslkc-0\"})([\"margin:15px 0 0 15px;padding:10px 15px;font-size:1.75em;border:1px solid var(--primary-darker);\"]),v=p.a.li.withConfig({displayName:\"pages__TagListItem\",componentId:\"nuslkc-1\"})([\"display:inline-block;margin-right:5px;padding:3px 5px;font-size:.5em;background-color:var(--secondary-color);\"]),b=p.a.p.withConfig({displayName:\"pages__DescP\",componentId:\"nuslkc-2\"})([\"font-size:.85em;\"]),k=p.a.p.withConfig({displayName:\"pages__DateP\",componentId:\"nuslkc-3\"})([\"font-size:.7em;\"]);var x=!0;t.default=function(n){var t=n.posts,e=n.tags,r=Object(i.useState)(t),c=r[0],s=(r[1],Object(i.useState)([])),p=s[0],f=s[1],m=Object(i.useState)([]),_=m[0],x=m[1],T=Object(i.useState)([]),N=T[0],I=T[1];Object(i.useEffect)((function(){(function(n){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",Promise.all(n.map((function(n){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(u.a.fetch('\\n                *[ _id == $tagID ]{\\n                    name,\\n                    _id,\\n                    \"count\": count(\\n                        *[ _type == \"post\" && $tagID in tags[]._ref ]\\n                    )\\n                }[0]\\n            ',{tagID:n._id}));case 2:return t.abrupt(\"return\",t.sent);case 3:case\"end\":return t.stop()}}),null,null,null,Promise)}))));case 1:case\"end\":return t.stop()}}),null,null,null,Promise)})(e).then((function(n){x(n)})).catch((function(n){return console.log(\"error getting tag counts: \",n)}))}),[]),Object(i.useEffect)((function(){if(N.length>0){var n=[];c.forEach((function(t){t.tags.forEach((function(e){N.includes(e._id)&&n.push(t)}))})),f(function(n){return o(new Set(n.map((function(n){return JSON.stringify(n)})))).map((function(n){return JSON.parse(n)}))}(n))}else f([])}),[N]);var O=p.length>0?p:c;return y(g.a,null,y(\"h2\",null,\"Tags:\"),y(h,{tags:_,handleTagFilter:function(n){var t=n.target.id;\"clearFilter\"===t?I([]):N.includes(t)?I(N.filter((function(n){return n!==t}))):I((function(n){return[].concat(o(n),[t])}))},filteredTags:N}),y(\"h2\",null,\"Posts:\"),O.map((function(n){var t=n._id,e=n._createdAt,r=n.description,a=n.slug,o=n.title,i=n.tags;return y(w,{key:t},y(l.a,{href:\"/post/[slug]\",as:\"/post/\".concat(a.current)},y(\"a\",null,o)),y(b,null,r),y(k,null,d.a.utc(e).format(\"LL\")),y(\"ul\",null,i.map((function(n){return y(v,{key:n._id},n.name)}))))})))}},vlRD:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return e(\"RNiq\")}])}},[[\"vlRD\",0,2,1,3,10]]]);"}